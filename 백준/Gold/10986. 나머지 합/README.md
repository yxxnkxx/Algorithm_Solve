# [Gold III] 나머지 합 - 10986 

[문제 링크](https://www.acmicpc.net/problem/10986) 

### 성능 요약

메모리: 160148 KB, 시간: 440 ms

### 분류

수학(math), 누적 합(prefix_sum)

### 문제 설명

<p>수 N개 A<sub>1</sub>, A<sub>2</sub>, ..., A<sub>N</sub>이 주어진다. 이때, 연속된 부분 구간의 합이 M으로 나누어 떨어지는 구간의 개수를 구하는 프로그램을 작성하시오.</p>

<p>즉, A<sub>i</sub> + ... + A<sub>j</sub> (i ≤ j) 의 합이 M으로 나누어 떨어지는 (i, j) 쌍의 개수를 구해야 한다.</p>

### 입력 

 <p>첫째 줄에 N과 M이 주어진다. (1 ≤ N ≤ 10<sup>6</sup>, 2 ≤ M ≤ 10<sup>3</sup>)</p>

<p>둘째 줄에 N개의 수 A<sub>1</sub>, A<sub>2</sub>, ..., A<sub>N</sub>이 주어진다. (0 ≤ A<sub>i</sub> ≤ 10<sup>9</sup>)</p>

### 출력 

 <p>첫째 줄에 연속된 부분 구간의 합이 M으로 나누어 떨어지는 구간의 개수를 출력한다.</p>

---

누적합을 활용하면 되는 문제인데, 입력의 범위가 크기 때문에 단순히 누적합 배열로 모든 조합을 구하려고 하면 안 된다.

제시된 예제의 경우 나머지를 누적합한 배열을 만든다면 다음과 같이 될 것이다.

```
5 3
1 2 3 1 2

sum = {1, 3, 6, 7, 9};
res = {1, 0, 0, 1, 0};
```

이때 존재하는 부분 수열 중에서 나머지가 0인 수열의 개수를 찾는다면, 누적합을 구할 때처럼

res\[end\] - res\[start-1\] = 0 을 통해 찾을 수 있다.

이 조건은 res\[end\] = res\[start-1\]을 의미한다.

즉 가능한 조건은 res의 값들이 같은 index를 찾는 것이다.

입력이 최대 $$10^6$$  이기 때문에 res 값이 같은 두 수를 for문으로 찾으려면 시간이 많이 소요된다.

그래서 cnt 배열을 사용할 수 있다.

예를 들어 위 사례에서 나머지가 1인 index는 2개이다.

2개로 가능한 조합의 개수는 $$\_2C\_2$$ 로 1개가 된다.

즉, 가능한 나머지의 수를 count 배열로 만들어서 계산하면 된다.

주의할 점은 0의 경우 1로 시작해야 한다는 점이다. res\[i-1\]이 0이라면 0부터 i-1까지의 나머지는 res\[i-1\]이 되기 때문에 처음부터 시작하는 경우의 수를 포함해야 한다.

요약하자면 가능한 경우의 수는

$$ count\[idx\] \* ( count\[idx\] - 1 ) $$

를 모두 더하면 되고, count\[0\]의 초기값만 1로 두면 된다.
